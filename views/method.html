{% extends 'layout.html' %}

{% block title %}Method{% endblock %}

{% block head %}
<script type="text/javascript" src="/js/tab.js"></script>
<script type="text/javascript" src="/js/method.js"></script>
<script type="text/javascript" src="/js/editor.js"></script>
<script type="text/javascript" src="/js/lib/socket.io-1.3.4.js"></script>
<script type="text/javascript" src="/js/lib/src-noconflict/ace.js" charset="utf-8"></script>


<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/css/tab.css" />
<link rel="stylesheet" type="text/css" href="/css/method.css" />

{% endblock %}

{% block content_left %}
<h1>Method Configuration</h1>
Project Name: 
<select id="projects" name="project_name">
{% if selectedConnection.selectedProject %}
	<option value="{{ selectedConnection.selectedProject }}">
		{{ selectedConnection.selectedProject }}
	</option>
{% else %}
	<option value="">Choose A Project</option>
{% endif %}
</select>
<img id="projWait" />
<div class="tabs">
	<ul class="tab-links">
		<li class="active"><a href="#tab1">New Method</a></li>
		<li><a href="#tab2">Edit Method</a></li>
	</ul>
	<div class="tab-content">
		<div id="tab1" class="tab active">
			<table id="new_method">
				<tr>
					<td>Method Name</td>
					<td><input name="method_name" type="text" size="30"></td>
				</tr>
				<tr>
					<td>Method Type</td>
					<td>
						<select id="method_types" name="method_type">
							<option value="">Choose A Method Type</option>
						</select>
					</td>
				</tr>
				<tr>
					<td>Comment</td>
					<td>
						<textarea name="comment"></textarea>
					</td>
				</tr>
			</table>
			<div class="centered-text">
				</br>
				<button class="action" name="project" onclick="manage_method('create');" disabled>Create Method</button>
			</div>
		</div>

		<div id="tab2" class="tab">
			<table id="edit_method">
				<tr>
					<td>Method Name</td>
					<td>
						<select id="methods" name="method_name">
							<option value="">Choose A Method</option>
						</select>
					</td>
					<td>
						<button class="action" name="method" onclick="manage_method('edit');" disabled>Edit Method</button>
						<br/>
						<button class="action" name="method" onclick="manage_method('delete');" disabled>Delete Method</button>
					</td>
				</tr>
				<tr>
					<td>Method Type</td>
					<td>
						<input name="method_type" type="text" size="30" readonly>
					</td>
					<td></td>
				</tr>
				<tr>
					<td></td>
					<td>
						Folder :
						<select id="folders" class="action" name="method" name="folder_name" disabled>
							<option value="src">sources</option>
							<option value="out">outputs</option>
							<option value="jobs">jobs</option>
						</select>
						<button id="create_zip" class="action" name="method" onclick="createZip()" disabled>Create Zip</button>
					</td>
					<td></td>
				</tr>
				<tr>
					<td>Files</td>
					<td>
						<select id="src_files" name="src_name" size="5">
						</select>
					</td>
					<td>
					<!--
						<button id="edit_code" onclick="getRemoteSrc( event )">New File</button>
						<br/>
						-->
						<button id="edit_code" class="action" name="method" onclick="getRemoteSrc( event )" disabled>Edit File</button>
						<!--
						<br/>
						<button id="edit_code" onclick="getRemoteSrc( event )">Delete File</button>
						-->
					</td>
				</tr>
				<tr>
					<td>Comment</td>
					<td>
						<textarea name="comment"></textarea>
					</td>
					<td>
						<a id="zipFile"/>
					</td>
				</tr>
			</table>
			<div class="centered-text">
				</br>
				<table>
					<tr>
						<td style='text-align: left'>
							Job Scheduler: 
							<select id="sched_type" 
							onchange="if (this.value==='') $('.scheduler').prop('disabled',true);
							else $('.scheduler').prop('disabled',false);"> 
								<option value="">None</option>
								<option value="pbs">PBS</option>
								<option value="sge">SGE</option>
							</select>
							</br>
							Partition: 
							<input class="scheduler" id="sched_part" type="text" size="7" value="smp" disabled>
							</br>
							Walltime: 
							<input class="scheduler" id="walltime" type="text" size="7" value="0" disabled>
							</br>
							Memory: 
							<input class="scheduler" id="memory" type="text" size="7" value="0" disabled>
							</br>
							Queue: 
							<input class="scheduler" id="sched_queue" type="text" size="7" disabled>
						</td>
					</tr>
				</table>

				</br>
				<button class="action" name="project" onclick="actionOnMethodSocketIO('compile');" disabled>Compile</button>
				<button class="action" name="project" onclick="actionOnMethodSocketIO('compile_run');" disabled>Compile&amp;Run</button>

				<!-- <table>
					<tr>
						<td style='text-align: left'>
							Action directly executed:
						</td>
						<td>
							<button class="action" onclick="actionOnMethodSocketIO('compile', '');">Compile</button>
							<button class="action" onclick="actionOnMethodSocketIO('compile_run', '');">Compile&amp;Run</button>
						</td>
					</tr>
					<tr>
						<td style='text-align: left'>
							Action executed using job:
						</td>
						<td>
							<button class="action" onclick="actionOnMethodSocketIO('compile', '_job');">Compile</button>
							<button class="action" onclick="actionOnMethodSocketIO('compile_run', '_job');">Compile&amp;Run</button>
						</td>
					</tr>
				</table> -->
			</div>
		</div>
	</div>
</div>		
{% endblock %}
{% block content_right %}
<div id="info_area">
	<h3>
		Info
	</h3>
	<textarea id="info_textarea" class="scrollarea"></textarea>
</div>
<div id="cmd_response">
	<h3>
		Command Response
		<img id="respWait" style="float:right"/>
	</h3>
	<textarea id="resp_textarea" class="scrollarea" readonly style="max-height:150px; height:150px"></textarea>
	<div class="centered-text">
		</br>
		<button onclick="setTextAndScroll( 'resp_textarea', '' );">Clean</button>
		<button class="kill" onclick="kill_process();" disabled>Kill process</button>
	</div>
</div>
<div id="shadow" style="display: none;"></div>
<div class="overlay" style="display: none;">
	<div class="edit-wrapper">
		<div class="edit-content">
			<a class="close">x</a>
			<h3>Source code Editor</h3>
			<div id="src_editor"></div>
			<script>
			    var editor = ace.edit("src_editor");
				editor.setTheme("ace/theme/twilight");
				editor.getSession().setMode("ace/mode/c_cpp");
				//editor.getSession().setValue(value);
			</script>
			</br>
			<input type="button" onclick="setSrc()" value="Save code">
		</div>
	</div>
</div>
{% endblock %}