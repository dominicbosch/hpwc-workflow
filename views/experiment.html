{% extends 'layout.html' %}

{% block title %}Experiment{% endblock %}

{% block head %}
<link rel="stylesheet" type="text/css" href="/css/experiment.css" />
<script type="text/javascript" src="/js/experiment.js"></script>
<script type="text/javascript" src="/js/graph.js"></script>

<!-- CSS -->

{% endblock %}

{% block content_left %}
<h1>Macro-experiment</h1>
</br>
<table id="experiment_setup">
	<tr>
		<td id="Problem">
			<h1>Problem</h1>
			<h4>Choose the problem and its parameters for the experiment</h4>
			<table>
				<tr>
					<td>Project name: </td>
					<td>
						<select id="projects" name="project_name">
						{% if selectedConnection.selectedProject %}
							<option value="{{ selectedConnection.selectedProject }}">
								{{ selectedConnection.selectedProject }}
							</option>
						{% else %}
							<option value="">Choose A Project</option>
						{% endif %}
						</select>
					</td>
				</tr>
				<tr>
					<td>Parameters list: </td>
					<td name="par_list"></td>
				</tr>
				<tr>
					<td>Values: </td>
					<td>
						<input id="par_val" type="text" size="15"> 
						<button onclick="addToList('par_val', true )">Add</button>
					</td>
				</tr>
				<tr>
					<td name="par_val" colspan="2"></td>
				</tr>
			</table>
		</td>
		<td id="Method"  style="width: 50%;">
			<h1>Methods</h1>
			<h4>Select the methods you want to be used in your experiment</h4>
			<table style="width: 100%;">
				<tr>
					<td>
						<div name="methods" class="paramlist"></div>
					</td>
				</tr>
				<tr style="text-align: center;">
					<td>
						<button onclick="editAll('div','methods', true )">All</button>
						<button onclick="editAll('div','methods', false )">Clean</button>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td id="System">
			<h1>System</h1>
			<h4>Choose system and system-specific options for the experiment</h4>
			<table>
				<tr>
					<td># of threads:<br>
						<input id="nthreads" type="text" size="5">
						<button onclick="addToList('nthreads', true )">Add</button>
					</td>
					<td name="nthreads">
						<label><input type="checkbox" value="1">1</label>
						<label><input type="checkbox" value="2">2</label>
						<label><input type="checkbox" value="4">4</label>
						<label><input type="checkbox" value="8">8</label>
						<label><input type="checkbox" value="16">16</label>
						<label><input type="checkbox" value="32">32</label>
					</td>
				</tr>
				<tr>
					<td>
						
					</td>
					<td>
						<button onclick="editAll('td','nthreads', true )">All</button>
						<button onclick="editAll('td','nthreads', false )">Clean</button>
					</td>
				</tr>
			</table>


		</td>
		<td id="OldExperiment">
		<!--
			<h1>Old experiments</h1>
			<h4>List of existing experiment configuration for this project</h4>
			<label>Current experiment:</label>
			<select id="experiments">
				<option value="">Choose An Experiment</option>
			</select>
			-->
			<h1>Repetition</h1>
			<h4>Number of repetitions</h4>
			<table>
				<tr>
					<td>Number:<br>
						<input id="repetitions" type="number" min="1" value="5">
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td id="JobScheduler" colspan="2">
			<h1>Job Scheduler</h1>
			<h4>Configure Job Scheduler options</h4>
			<table style="width:100%">
				<tr>
					<td style="width:50%">
						Job Scheduler:
						<select id="sched_type" onchange="if (this.value==='') $('.scheduler').prop('disabled',true);
							else $('.scheduler').prop('disabled',false);"> 
							<option value="">None</option>
							<option value="pbs">PBS</option>
							<option value="sge">SGE</option>
						</select>
						</br>
						Partition: 
						<input class="scheduler" id="sched_part" type="text" size="7" value="smp" disabled>
						</br>
						Walltime: 
						<input class="scheduler" id="walltime" type="text" size="7" value="0" disabled>
						</br>
						Memory: 
						<input class="scheduler" id="memory" type="text" size="7" value="0" disabled>
					</td>
					<td style="width:50%; text-align:center" >
						<button class="action" name="project" onclick="runExp();" disabled>Run Experiment</button>
					</td>
				</tr>
			</table>
		</td>
	</tr>
</table>
{% endblock %}

{% block content_right %}
<div id="info_area">
	<h3>
		Info
	</h3>
	<textarea id="info_textarea" class="scrollarea" readonly></textarea>
</div>
<div id="cmd_response">
	<h3>
		Command Response
		<img id="respWait" style="float:right"/>
	</h3>
	<textarea id="resp_textarea" class="scrollarea"  readonly style="max-height:150px; height:150px"></textarea>
	<div class="centered-text">
		</br>
		<button onclick="setTextAndScroll( 'resp_textarea', '' );">Clean</button>
		<button class="kill" onclick="kill_process();" disabled>Kill process</button>
	</div>
</div>
{% endblock %}